---
title: "文献数据复现"
author: "liuc"
date: "2/17/2022"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 文献复现

以下对文献：Molnupiravir for Oral Treatment of covid19 in nonhospitalized Patients 中的分析进行复现.

1）主要结局指标是，29天住院或者死亡率 （2）次要结局指标：新冠患者缓解率、新冠症状改善所需时间、SARS-CoV-2病毒载量改变


### 样本量计算

主要结局为率数据，两组率样本量计算。

```{r}
library(pwr)

pwr::pwr.2p.test(
  n = NULL,
  h = ES.h(p1 = 0.06, p2 = 0.12),
  sig.level = 0.025,
  alternative = "less",
  power = 0.95)
```


### 主要结局指标 

主要结局指标为29天住院或者死亡率, 即是求用药组和安慰剂组率差，以及对应的95%CI。在STATISTICAL ANALYSIS 一节中提到结局指标的率差计算为：Miettinen and Nurminen method, which was used to calculate the adjusted risk difference and associated 95% confidence intervals for analysis using Cochran–Mantel–Haenszel weights.

```{r}
library(DescTools)

DescTools::BinomDiffCI(28, 385, 53, 377, 
                       method = c("wald", "waldcc", "ac", "score", "scorecc", "mn", "mee", "blj", "ha", "hal", "jp"))

# methods mn 即是所说率差计算方法。
DescTools::BinomDiffCI(48, 709, 68, 699, 
                       method = "mn")


# 率的比较用卡方/Cochran–Mantel–Haenszel, 分层卡方
stats::mantelhaen.test()


```


## 文献复现2

论文为：Oral Nirmatrelvir for High-Risk, Nonhospitalized Adults with Covid-19

本研究的主要指标为：第28日的COVID-19相关住院或全因死亡、病毒载量和安全性


```{r}

```

